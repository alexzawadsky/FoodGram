# «Проект YaMDb» 

Проект YaMDb собирает отзывы (Review) пользователей на произведения (Titles).

Произведения делятся на категории: «Книги», «Фильмы», «Музыка». 
Список категорий (Category) может быть расширен администратором (например, можно добавить категорию «Изобразительное искусство»).
Сами произведения в YaMDb не хранятся, здесь нельзя посмотреть фильм или послушать музыку.

В каждой категории есть произведения: книги, фильмы или музыка. 
Например, в категории «Книги» могут быть произведения «Винни-Пух и все-все-все» и «Марсианские хроники», а в категории «Музыка» — песня «Давеча» группы «Насекомые» и вторая сюита Баха.

Произведению может быть присвоен жанр (Genre) из списка предустановленных (например, «Сказка», «Рок» или «Артхаус»). Новые жанры может создавать только администратор.

Благодарные или возмущённые пользователи оставляют к произведениям текстовые отзывы (Review) и ставят произведению оценку в диапазоне от одного до десяти (целое число); из пользовательских оценок формируется усреднённая оценка произведения — рейтинг (целое число). На одно произведение пользователь может оставить только один отзыв.

###  В проекте «YaMDb» реализованы ресурсы:

- *Ресурс auth: аутентификация.*
- *Ресурс users: пользователи.*
- *Ресурс titles: произведения, к которым пишут отзывы (определённый фильм, книга или песня).*
- *Ресурс categories: категории (типы) произведений («Фильмы», «Книги», «Музыка»).*
- *Ресурс genres: жанры произведений. Одно произведение может быть привязано к нескольким жанрам.*
- *Ресурс reviews: отзывы на произведения. Отзыв привязан к определённому произведению.*
- *Ресурс comments: комментарии к отзывам. Комментарий привязан к определённому отзыву.*


У неаутентифицированных пользователей доступ к API только на чтение. 
К некоторым эндпоинтам доступ предоставляться только аутентифицированным пользователям.
Аутентифицированным пользователям разрешено изменение и удаление своего контента.

Для аутентификации используются JWT-токены.
Работа с JWT-токенами организована при помощи permission classes.

## Как запустить проект в Docker контейнере:
- [x] 1) Скачать и настроить приложение Docker.
- [x] 2) Клонировать репозиторий и перейти в него в командной строке.

- [x] 3) Перейти в репозиторий infra/.

```
cd infra
```

- [x] 4) Создать файл .env:

```
touch .env
```

- [x] 5) Наполнить файл .env по шаблону:

```
DB_ENGINE=django.db.backends.postgresql # указываем, что работаем с postgresql
DB_NAME=postgres # имя базы данных
POSTGRES_USER=postgres # логин для подключения к базе данных
POSTGRES_PASSWORD=postgres # пароль для подключения к БД (установите свой)
DB_HOST=db # название сервиса (контейнера)
DB_PORT=5432 # порт для подключения к БД
SECRET_KEY='your_secret_key' # ваш секретный ключ из настроек Django проекта
```

- [x] 6) Запустить сборку образа и запуск контейнера командой:

```
docker-compose up -d --build
```

- [x] 7) Выполнить миграции:

```
docker-compose exec web python manage.py migrate
```

- [x] 8) Собрать статику:

```
docker-compose exec web python manage.py collectstatic --no-input 
```

- [x] 9) Создать суперпользователя:

```
docker-compose exec web python manage.py createsuperuser
```

- [x] 10) Сайт будет доступен по адресу:

```
http://localhost/
```

- [x] *11) Заполнить БД данными из файла фикстур:

```
docker-compose exec web python manage.py loaddata fixtures.json
```

### Алгоритм регистрации пользователей:


- [x] Пользователь отправляет POST-запрос на добавление нового пользователя с параметрами email и username на эндпоинт /api/v1/auth/signup/.
- [x] YaMDB отправляет письмо с кодом подтверждения (confirmation_code) на адрес email.
- [x] Пользователь отправляет POST-запрос с параметрами username и confirmation_code на эндпоинт /api/v1/auth/token/, в ответе на запрос ему приходит token (JWT-токен).
- [x] При желании пользователь отправляет PATCH-запрос на эндпоинт /api/v1/users/me/ и заполняет поля в своём профайле (описание полей — в документации).


## Примеры:

Когда вы запустите проект, по адресу localhost/redoc/ будет доступна документация для API Yatube. В документации описано, как работает API. Документация представлена в формате Redoc.

Пример GET запроса для получения списка всех категорий (доступно без токена):

```
/api/v1/categories/
```

Ответ:


```
[

{

    "count": 0,
    "next": "string",
    "previous": "string",
    "results": 

[

            {
                "name": "string",
                "slug": "string"
            }
        ]
    }

]
```

Пример GET запроса для получения пользователя по username (доступно только администратору):

```
/api/v1/users/{username}/
```

```
{

    "username": "string",
    "email": "user@example.com",
    "first_name": "string",
    "last_name": "string",
    "bio": "string",
    "role": "user"

}
```

## Используемые технологии:

- Python
- Django 
- Djangorestframework
- Docker

## Автор:

Алексей Завадский
Студент факультета Бэкенд. Когорта №37.
Яндекс Практикум.
